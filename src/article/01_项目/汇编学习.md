---
icon: pen-to-square
date: 2024-12-27
tags: 
title: 汇编学习
category:
  - 项目
---
# cpu与存储器
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227153707.png)

cpu对外部器件读写数据工作原理，不同的机器码可以对应数据或者指令，分出了三种总线：
- cpu由地址总线发出寻址数据
  地址宽度由其并联的导线数决定，一个导线有0,1两种状态，宽度决定了其寻址数，为2^n
  
- cpu经控制总线发出指令，对所在地址进行操作
  控制总线的宽度决定了cpu对外部器件控制的能力
  
- 内存与cpu经过数据总线来传递数据
  数据总线并联的导线数量决定了一次传输的位

存储器芯片
- RAM:可读可写，需要通电
- ROM:只读不可写，断电后不会丢失数据，可以存放bios

这些存储器与cpu通过总线项链，但是cpu都把他们当做内存单元
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227154536.png)
cpu会以一定逻辑对地址进行分类
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227155020.png)

当我们需要对一个计算机硬件系统进行编程时，必须要了解起始地址和结束地址，以及存储器地址分配的结构

# cpu内部
一个典型的cpu由运算器、控制器、寄存器等器件构成，他们之间通过内部总线连接
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227155542.png)

## 8086cpu寄存器
1. **通用寄存器**（8个）:
   - AX（累加器寄存器）
   - BX（基地址寄存器）
   - CX（计数器寄存器）
   - DX（数据寄存器）
   - SP（堆栈指针寄存器）
   - BP（基指针寄存器）
   - SI（源变址寄存器）
   - DI（目的变址寄存器）

2. **段寄存器**（4个）:
   - CS（代码段寄存器）
   - DS（数据段寄存器）
   - SS（堆栈段寄存器）
   - ES（附加段寄存器）

3. **控制寄存器**（2个）:
   - IP（指令指针寄存器）
   - FLAG（标志寄存器）
### 通用寄存器
AX、BX、CX、DX用来存放一般性数据，称为通用寄存器
8086由于需要对上代8位寄存器的兼容，可以把一个16进制的寄存器分为两个8进制寄存器
高八位位AH寄存器，低八位为AL寄存器

### 字节与字
一个字节有八位，一个子有两个字节16位

### 一些汇编指令
mov a,b 相当于给变量赋值操作，b的值赋值给a
add a,b 相当于相加操作，相加后的结果赋值给a
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227162444.png)

- 当一个寄存器存储的数据高于十六位时，为丢弃最高位的数据吗，一个十六进制数据占四个bit，所以八bit寄存器只能存放两个十六进制数据
### 8086的寻址办法
8086有20为的地址总线，意味着总线的寻址能力达到1mb。
而8086是16位结构，意味着8086内部只能一次性处理、传输、暂时存储的地址为16位，表现出的寻址能力仅为64kb
所以在8086内部有一种形成20位物理地址的方法，结构如下
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227163257.png)

----
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227163349.png)
地址加法器采用：物理地址=段地址×16+偏移地址   的方法形成物理地址，加法器的工作原理如图
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227163612.png)
还是那个算法，一个十六进制数据占4为，一个16+4=20位存储器能表示5个16进制数据，
意思就是把偏移地址加入到低位
总的来说，8086cpu在用20位地址总线来访问地址时，会用  基础地址+偏移地址+物理地址  的方法寻址
超级形象的例子：
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20241227164214.png)
当然了，不能强行将两个16进制构造出32位数据，必然会丢弃一些信息，所以，不同的两个16进制段地址 和 偏移地址 可能指向相同的20进制 物理地址 

***引入段寄存器，***

### 段寄存器
CS

