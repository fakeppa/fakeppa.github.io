---
icon: pen-to-square
date: 2025-02-26
tags: 
title: 2.10STP生成树协议
category:
  - 项目
---
# BPDU报文
桥协议数据单元，生成树的协商报文，BPDU报文被封装在**以太网802.3**数据帧中
目的MAC是组播MAC，48位二进制数据中如果第八位为1则为组播，为0，则单播
- 配置BPDU：用来生成树计算和维护生成树拓补的报文，当竞选或维护时由根桥发出，宣告根的地位
- TCN BPDU：拓补变化通知BPDU，有新接入时由新设备发送，重新组织拓补结构 
![image.png](https://cdn.jsdelivr.net/gh/fakeppa/blog-img/20250226204651.png)
 该图为配置BPDU的报文格式，画出的四个字段比较重要
 - Root Identifier:当前根桥的BID，由桥优先级和MAC地址组成，优先级默认为32768
 - Root Path Cost：根路径开销
 - Bridge Identifier：本交换机的BID
 - Port Identifier：发送该BPDU的端口ID，有端口优先级和端口编号组成，优先级默认为128（8为二进制组成）