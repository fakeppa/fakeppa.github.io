---
tags:
icon: pen-to-square
date: 2025-10-31
title: 2. 生成树实验
category:
  - 项目
---
## 通用
开启端口（端口配置）
`undo shutdown`
关闭端口(端口配置)
`shutdown`
## 手动设置根交换机
**主根设置**
`stp root primary`
**次根设置**
`stp root secondary`
**手动调整根端口选举(端口配置,自动规则：对端端口id小的成为根端口)**
`stp port priority 0`设置优先级为0
## 展示stp配置
**展示交换机mac地址**
`dis bridge mac-address`
**展示端口设置**
`dis stp brief`
**展示全局stp设置**
`dis stp`
**展示是否是根桥/次根桥**
```
[Huawei]dis cu | i stp
stp instance 0 root secondary
```
**展示端口级别调整**
```
dis cu interface g0/0/5
```

## 设置边缘端口
**设置边缘端口(端口设置 )**
`stp edged-port enable`

## 生成树保护功能
**边缘bpdu保护**:防止bpdu欺骗攻击（down掉）
如果接受到bpdu则直接down掉
`stp bpdu-protection enable`

**根交换机保护**：(阻塞)防止新接入的交换机拥有更低优先级，引起网络震荡
`stp root-protection`
